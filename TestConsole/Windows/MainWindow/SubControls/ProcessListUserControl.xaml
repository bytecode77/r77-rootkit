<ui:ObservableUserControl
	x:Class="TestConsole.ProcessListUserControl"
	x:Name="processListUserControl"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:local="clr-namespace:TestConsole"
	xmlns:model="clr-namespace:TestConsole.Model"
	xmlns:ui="http://schemas.bytecode77.com/2023/xaml/presentation"
	xmlns:cui="http://schemas.bytecode77.com/2025/xaml/cui"
	DataContext="{Binding ViewModel, ElementName=processListUserControl}">
	<cui:UiListView x:Name="lstProcesses" ItemsSource="{Binding Processes}" SelectedItem="{Binding SelectedProcess}" SortColumn="Name" SortColumn2="SortKey" BorderThickness="0">
		<cui:UiListView.ItemContainerStyle>
			<Style TargetType="{x:Type ListViewItem}" BasedOn="{StaticResource {x:Type ListViewItem}}">
				<Style.Triggers>
					<DataTrigger Binding="{Binding Status}" Value="{x:Static model:ProcessStatus.New}">
						<Setter Property="Background" Value="#504cff00" />
					</DataTrigger>
					<DataTrigger Binding="{Binding Status}" Value="{x:Static model:ProcessStatus.Terminated}">
						<Setter Property="Background" Value="#50c00000" />
					</DataTrigger>
				</Style.Triggers>
			</Style>
		</cui:UiListView.ItemContainerStyle>
		<cui:UiListView.View>
			<GridView>
				<cui:UiGridViewColumn Header="Process" Width="150" SortProperty="Name">
					<cui:UiGridViewColumn.CellTemplate>
						<DataTemplate>
							<DockPanel>
								<Image Source="{Binding Icon, Converter={ui:ImageSourceConverter}}" Width="16" Height="16" Margin="0,0,5,0" />
								<TextBlock Text="{Binding Name}" />
							</DockPanel>
						</DataTemplate>
					</cui:UiGridViewColumn.CellTemplate>
				</cui:UiGridViewColumn>
				<cui:UiGridViewColumn Header="PID" DisplayMemberBinding="{Binding Id}" Width="80" SortProperty="Id" />
				<cui:UiGridViewColumn Header="Platform" Width="60" SortProperty="Platform">
					<cui:UiGridViewColumn.CellTemplate>
						<DataTemplate>
							<Grid>
								<TextBlock Text="32" Visibility="{Binding Is64Bit, Converter={ui:EqualityConverter Equal, Visibility}, ConverterParameter={ui:Boolean False}}" />
								<TextBlock Text="64" Visibility="{Binding Is64Bit, Converter={ui:EqualityConverter Equal, Visibility}, ConverterParameter={ui:Boolean True}}" />
							</Grid>
						</DataTemplate>
					</cui:UiGridViewColumn.CellTemplate>
				</cui:UiGridViewColumn>
				<cui:UiGridViewColumn Header="Integrity" DisplayMemberBinding="{Binding IntegrityLevel}" Width="80" SortProperty="IntegrityLevel" />
				<cui:UiGridViewColumn Header="User" DisplayMemberBinding="{Binding User}" Width="150" SortProperty="User" />
				<cui:UiGridViewColumn Header="Flags" Width="95">
					<cui:UiGridViewColumn.CellTemplate>
						<DataTemplate>
							<Grid>
								<DockPanel Visibility="{Binding IsR77Service, Converter={ui:BooleanConverter Visibility}}">
									<cui:UiSvgImage Source="/TestConsole;component/Resources/Icons/R77Service.svg" Margin="0,0,5,0" />
									<TextBlock Text="r77 Service" />
								</DockPanel>
								<DockPanel Visibility="{Binding IsHelper, Converter={ui:BooleanConverter Visibility}}">
									<cui:UiSvgImage Source="/TestConsole;component/Resources/Icons/R77Helper.svg" Margin="0,0,5,0" />
									<TextBlock Text="Helper" />
								</DockPanel>
							</Grid>
						</DataTemplate>
					</cui:UiGridViewColumn.CellTemplate>
				</cui:UiGridViewColumn>
				<cui:UiGridViewColumn Header="Inject" Width="110" SortProperty="IsInjected">
					<cui:UiGridViewColumn.CellTemplate>
						<DataTemplate>
							<Grid Visibility="{Binding CanInject, Converter={ui:BooleanConverter Visibility}}">
								<cui:UiFlatButton Margin="-1" Padding="3,0" HorizontalContentAlignment="Left" BorderThickness="1" BorderBrush="#d0d0d0" BorderBrushMouseOver="#b0b0b0" BorderBrushMouseDown="#a0a0a0" Background="#f3f3f3" BackgroundMouseOver="#fdfdfd" BackgroundMouseDown="#e0e0e0" CornerRadius="3" Visibility="{Binding IsInjected, Converter={ui:BooleanConverter VisibilityInverse}}" Command="{Binding DataContext.InjectCommand, ElementName=processListUserControl}" CommandParameter="{Binding}">
									<DockPanel>
										<cui:UiSvgImage Source="/TestConsole;component/Resources/Icons/Injected.svg" Margin="0,0,5,0" InheritForeground="True" />
										<TextBlock Text="Not Injected" />
									</DockPanel>
								</cui:UiFlatButton>
								<cui:UiFlatButton Margin="-1" Padding="3,0" HorizontalContentAlignment="Left" BorderThickness="1" BorderBrush="#808080" BorderBrushMouseOver="#909090" BorderBrushMouseDown="#707070" Background="#a0a0a0" BackgroundMouseOver="#b0b0b0" BackgroundMouseDown="#909090" CornerRadius="3" Foreground="White" Visibility="{Binding IsInjected, Converter={ui:BooleanConverter Visibility}}" Command="{Binding DataContext.DetachCommand, ElementName=processListUserControl}" CommandParameter="{Binding}">
									<DockPanel>
										<cui:UiSvgImage Source="/TestConsole;component/Resources/Icons/Injected.svg" Margin="0,0,5,0" InheritForeground="True" />
										<TextBlock Text="Injected" />
									</DockPanel>
								</cui:UiFlatButton>
							</Grid>
						</DataTemplate>
					</cui:UiGridViewColumn.CellTemplate>
				</cui:UiGridViewColumn>
				<cui:UiGridViewColumn Header="Hide by PID" Width="80" SortProperty="IsHiddenById">
					<cui:UiGridViewColumn.CellTemplate>
						<DataTemplate>
							<Grid>
								<cui:UiFlatButton Margin="-1" Padding="3,0" HorizontalContentAlignment="Left" BorderThickness="1" BorderBrush="#d0d0d0" BorderBrushMouseOver="#b0b0b0" BorderBrushMouseDown="#a0a0a0" Background="#f3f3f3" BackgroundMouseOver="#fdfdfd" BackgroundMouseDown="#e0e0e0" CornerRadius="3" Visibility="{Binding IsHiddenById, Converter={ui:BooleanConverter VisibilityInverse}}" Command="{Binding DataContext.HideCommand, ElementName=processListUserControl}" CommandParameter="{Binding}">
									<DockPanel>
										<cui:UiSvgImage Source="/TestConsole;component/Resources/Icons/Visible.svg" Margin="0,0,5,0" InheritForeground="True" />
										<TextBlock Text="Visible" />
									</DockPanel>
								</cui:UiFlatButton>
								<cui:UiFlatButton Margin="-1" Padding="3,0" HorizontalContentAlignment="Left" BorderThickness="1" BorderBrush="#808080" BorderBrushMouseOver="#909090" BorderBrushMouseDown="#707070" Background="#a0a0a0" BackgroundMouseOver="#b0b0b0" BackgroundMouseDown="#909090" CornerRadius="3" Foreground="White" Visibility="{Binding IsHiddenById, Converter={ui:BooleanConverter Visibility}}" Command="{Binding DataContext.UnhideCommand, ElementName=processListUserControl}" CommandParameter="{Binding}">
									<DockPanel>
										<cui:UiSvgImage Source="/TestConsole;component/Resources/Icons/Hidden.svg" Margin="0,0,5,0" InheritForeground="True" />
										<TextBlock Text="Hidden" />
									</DockPanel>
								</cui:UiFlatButton>
							</Grid>
						</DataTemplate>
					</cui:UiGridViewColumn.CellTemplate>
				</cui:UiGridViewColumn>
			</GridView>
		</cui:UiListView.View>
	</cui:UiListView>
</ui:ObservableUserControl>